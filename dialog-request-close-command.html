<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>デモ：dialog要素のrequest-closeコマンド</title>
<link rel="stylesheet" href="style.css">
</head>

<body>
<h1>デモ：dialog要素のrequest-closeコマンド</h1>

<div class="toolbar">
  <button
    class="open-button"
    command="show-modal"
    commandfor="modal-dialog">
    ダイアログを開く
  </button>
</div>
<dialog id="modal-dialog">
  <p>ダイアログです。</p>
  <button
    class="request-close-button"
    command="request-close"
    commandfor="modal-dialog"
    value="hello-world">
    閉じるリクエスト
  </button>
  <button class="close-button" command="close" commandfor="modal-dialog">
    閉じる
  </button>
</dialog>

<footer>
  <p><a href="./">トップに戻る</a></p>
</footer>

<script>
// dialogのcloseイベント、cancelイベント、commandイベントをconsole.dirに出力
// request-closeのvalueも確認したい
const dialog = document.querySelector("#modal-dialog");
dialog.addEventListener("close", (event) => {
  console.group("dialog close event");
  console.dir(event);
  console.groupEnd();
});
dialog.addEventListener("cancel", (event) => {
  console.group("dialog cancel event");
  console.dir(event);
  console.groupEnd();
});
dialog.addEventListener("command", (event) => {
  console.group("dialog command event");
  console.dir(event);
  console.groupEnd();
});

// closewatcherを設定、中身を確認
const watcher = new CloseWatcher();
watcher.addEventListener("close", (event) => {
  console.group("closewatcher close event");
  console.dir(event);
  console.groupEnd();
});
watcher.addEventListener("cancel", (event) => {
  console.group("closewatcher cancel event");
  console.dir(event);
  console.groupEnd();
});

// Escキーのkeydownイベントを確認
document.addEventListener("keydown", (event) => {
  if (event.key === "Escape") {
    console.group("Escape keydown event");
    console.dir(event);
    console.groupEnd();
  }
});
</script>
<script src="hide-footer-inside-iframe.js"></script>
</body>
</html>
